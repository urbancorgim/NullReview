{% extends 'base.html' %}
{% load static %}



{% block main %}
<div class="row container my-3">
  <h1>게시물관리</h1>
  <div class="float-right mr-3">
    <a href="{% url 'movie:create' %}" class="my-2 btn btn-info" style="float: right;">영화 추가</a>
  </div>

  <table class="table row m-0">
    <thead class="col-12 thead-dark">
      <tr class="row w-100 m-0">
        <th scope="col" class="col-6 col-md-8">제목</th>
        <th scope="col" class="col-3 col-md-2"></th>
        <th scope="col" class="col-3 col-md-2"></th>
      </tr>
    </thead>
    <tbody class="col-12">
      {% for movie in page_obj %}
      <tr class="row m-0">
        <td class="col-6 col-md-8 text-truncate" OnClick="location.href ='{% url 'movie:detail' movie.id %}'">{{ movie.title }}</td>
        <td class="col-3 col-md-2 text-center"><a href="{% url 'movie:modify' movie.id %}" class="square_btn">수정</a></td>
        <td class="col-3 col-md-2 text-center"><a href="#" class="square_btn" onclick="button_event();" >삭제</a></td>

        <script type="text/javascript">
            function button_event(){
            if (confirm("삭제된 게시물은 복구가 불가능합니다. 게시물을 삭제하시겠습니까?") == true){
                location.replace("{% url 'movie:delete' movie.id  %}");
            }
            else{
                return;
            }
            }
        </script>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

{% endblock %}